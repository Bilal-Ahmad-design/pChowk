<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="../dist/main.js"></script>
    <title>Node firebase</title>
  </head>
  <body>
    <div>
      <h1>Firebase image upload</h1>
      <input type="file" id="photo" />
      <button onclick="uploadImage()" id="btn">Upload image</button>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
      import { getStorage } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-storage.js';

      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: 'AIzaSyAuS3RJpwPlOTc9-ikq7b_opkraDL32wsg',
        authDomain: 'property-chowk-4608c.firebaseapp.com',
        projectId: 'property-chowk-4608c',
        storageBucket: 'property-chowk-4608c.appspot.com',
        messagingSenderId: '908989071036',
        appId: '1:908989071036:web:70064a22ef0df7a0955ab9',
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      function uploadImage() {
        const ref = firebase.storage().ref();
        const file = document.querySelector('#photo').files[0];
        const name = `${new Date()} '-' ${file.name}`;
        const metadata = {
          contentType: file.type,
        };
        const task = ref
          .child(name)
          .put(file, metadata)
          .then((snapshot) => snapshot.ref.getDownloadURL())
          .then((url) => {
            console.log(url);
          });
      }
    </script>
  </body>
</html>
